#!/usr/bin/env php
<?php declare(strict_types=1);

require_once \dirname(__DIR__, 3) . '/autoload.php';

use Eiko\Cli\Commands\Init;
use Eiko\Cli\Commands\Create;

try {
    switch($argv[1] ?? '') {
        case 'init':
            echo Init::runCommand(rootDir: $argv[2] ?? 'server');
            break;

        case 'create':
            echo Create::runCommand(file: $argv[2] ?? '', name: $argv[3] ?? '');
            break;

        default:
            echo <<<TXT
            |-------------------------------------------------------------------------------|
            | ######  ####   ##  ##    ####                                                 |
            | ##       ##    ## ##    ##  ##                                                |
            | #####    ##    ####    ##    ##                                               |
            | ##       ##    ## ##    ##  ##                                                |
            | ######  ####   ##  ##    ####                                                 |
            |-------------------------------------------------------------------------------|
            | Commands list:                                                                |
            |-------------->                                                                |
            | eiko init <name>                                         |-> Init structure;  |
            | eiko create <controller, middleware, model, route> <name>|-> Creat component; |
            |-------------------------------------------------------------------------------|
            TXT;
    }

} catch (Throwable) {
    echo <<<TXT
    |-------------------------|
    | Something went wrong... |
    | Run `eiko i`            |
    |-------------------------|
    TXT;

    exit(1);
}

exit(0);
